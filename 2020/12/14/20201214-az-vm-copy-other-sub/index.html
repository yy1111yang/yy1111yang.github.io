<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    

    
    <title>How can i move vm to other subscription. | Azure Cloud Blog</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="Cloud,Azure,Copy,Move">
    
    <meta name="description" content="Hi. Sometimes we use POC subscription not PROD subscription.Then if you done POC, you move to resources include VM, LB, etc…Maybe VM move to another subscription not share tenant too difficult. So i t">
<meta property="og:type" content="article">
<meta property="og:title" content="How can i move vm to other subscription.">
<meta property="og:url" content="https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/index.html">
<meta property="og:site_name" content="Azure Cloud Blog">
<meta property="og:description" content="Hi. Sometimes we use POC subscription not PROD subscription.Then if you done POC, you move to resources include VM, LB, etc…Maybe VM move to another subscription not share tenant too difficult. So i t">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/01.show_vm_with_disks.png">
<meta property="article:published_time" content="2020-12-14T01:21:32.000Z">
<meta property="article:modified_time" content="2023-06-27T06:56:54.215Z">
<meta property="article:author" content="Yong Yang">
<meta property="article:tag" content="Cloud">
<meta property="article:tag" content="Azure">
<meta property="article:tag" content="Copy">
<meta property="article:tag" content="Move">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/01.show_vm_with_disks.png">
    

    
        <link rel="alternate" href="/" title="Azure Cloud Blog" type="application/atom+xml">
    

    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


<meta name="generator" content="Hexo 5.2.0"></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Azure/">Azure</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Azure/Function/">Function</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Azure/Powershell/">Powershell</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Azure/VM/">VM</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Azure/Windows/">Windows</a></li></ul></li></ul>
                                
                                <li class="main-nav-list-item">
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Azure/">Azure</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Azure/VM/">VM</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-20201214-az-vm-copy-other-sub" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        How can i move vm to other subscription.
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2020/12/14/20201214-az-vm-copy-other-sub/" class="article-date">
       <time datetime="2020-12-14T01:21:32.000Z" itemprop="datePublished">2020-12-14</time>
    </a>
  </div>


<div class="article-date">
  <i class="fa fa-calendar-plus-o"></i>
  <a href="/2020/12/14/20201214-az-vm-copy-other-sub/" class="article-date">
     <time datetime="2023-06-27T06:56:54.215Z" itemprop="dateModified">2023-06-27</time>
  </a>
</div>


                

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/Azure/" rel="tag">Azure</a>, <a class="tag-link-link" href="/tags/Cloud/" rel="tag">Cloud</a>, <a class="tag-link-link" href="/tags/Copy/" rel="tag">Copy</a>, <a class="tag-link-link" href="/tags/Move/" rel="tag">Move</a>
    </div>

                

                

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <p>Hi. Sometimes we use POC subscription not PROD subscription.<br>Then if you done POC, you move to resources include VM, LB, etc…<br>Maybe VM move to another subscription not share tenant too difficult.</p>
<p>So i try it this post.<br>Total process is following:<br><strong>1. disk to snapshot</strong><br><strong>2. snapshot to VHD in blob</strong><br><strong>3. blob to blob(target Subscription)</strong><br><strong>4. make disk by VHD in blob</strong><br><strong>5. create vm using disk</strong></p>
<h2 id="Start-Demo"><a href="#Start-Demo" class="headerlink" title="Start Demo"></a>Start Demo</h2><h5 id="1-disk-to-snapshot"><a href="#1-disk-to-snapshot" class="headerlink" title="1. disk to snapshot"></a>1. disk to snapshot</h5><p>I have just one VM having two disk include osdisk.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/01.show_vm_with_disks.png" class>

<p>Before start demo, <strong>we have to create storage account to store vhd.</strong></p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/02.create_storage.png" class>

<p>After created storage, we also create container. i named <code>vmdisk</code></p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/03.create_container.png" class>

<p>And we convert disks to snapshots.<br>If you have many VM, use the command foloowing.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create snapshot </span></span><br><span class="line"></span><br><span class="line"><span class="variable">$resourceGroupName</span> = <span class="string">&#x27;bastion-rg&#x27;</span></span><br><span class="line"><span class="variable">$resourceGroup</span> = <span class="built_in">Get-AzureRmResourceGroup</span> <span class="literal">-Name</span> <span class="variable">$resourceGroupName</span></span><br><span class="line"><span class="variable">$location</span> = <span class="variable">$resourceGroup</span>.Location</span><br><span class="line">  </span><br><span class="line"><span class="variable">$nameList</span> = <span class="selector-tag">@</span>( </span><br><span class="line">   <span class="selector-tag">@</span>&#123; name=<span class="string">&#x27;az204-bastion-vm&#x27;</span>; &#125;</span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># create osDisk snapshot</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$list</span> <span class="keyword">in</span> <span class="variable">$nameList</span>) &#123; </span><br><span class="line">	<span class="variable">$vmName</span> = <span class="variable">$list</span>.name</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># get vm information </span></span><br><span class="line">	<span class="variable">$vm</span> = <span class="built_in">get-azvm</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-Name</span> <span class="variable">$vmName</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># set snapshot configuration</span></span><br><span class="line">	<span class="variable">$snapshot</span> =  <span class="built_in">New-AzSnapshotConfig</span> <span class="literal">-SourceUri</span> <span class="variable">$vm</span>.StorageProfile.OsDisk.ManagedDisk.Id  <span class="literal">-Location</span> <span class="variable">$location</span> <span class="literal">-AccountType</span> Premium_LRS  <span class="literal">-CreateOption</span> <span class="built_in">copy</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># create Snapshot </span></span><br><span class="line">	<span class="variable">$snapshotName</span> = <span class="string">&#x27;osdisk-&#x27;</span> + <span class="variable">$vmName</span> + <span class="string">&#x27;-001-snapshot&#x27;</span></span><br><span class="line">	<span class="built_in">New-AzSnapshot</span> <span class="literal">-Snapshot</span> <span class="variable">$snapshot</span> <span class="literal">-SnapshotName</span> <span class="variable">$snapshotName</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-AsJob</span></span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment"># create dataDisk snapshot</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$list</span> <span class="keyword">in</span> <span class="variable">$nameList</span>) &#123; </span><br><span class="line">	<span class="variable">$vmName</span> = <span class="variable">$list</span>.name</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># get vm information </span></span><br><span class="line">	<span class="variable">$vm</span> = <span class="built_in">get-azvm</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-Name</span> <span class="variable">$vmName</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment"># get Disk information</span></span><br><span class="line">	<span class="variable">$dataDiskList</span> = <span class="variable">$vm</span>.StorageProfile.DataDisks</span><br><span class="line">	<span class="keyword">foreach</span>(<span class="variable">$dList</span> <span class="keyword">in</span> <span class="variable">$dataDiskList</span>) &#123; </span><br><span class="line">		<span class="variable">$diskName</span> = <span class="variable">$dList</span>.name</span><br><span class="line">		</span><br><span class="line">		<span class="comment"># if disk is null then continue;</span></span><br><span class="line">		<span class="keyword">if</span>(!<span class="variable">$diskName</span>) &#123; </span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="variable">$disk</span> = <span class="built_in">get-azureRmDisk</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-DiskName</span> <span class="variable">$diskName</span>  </span><br><span class="line">		</span><br><span class="line">		<span class="comment"># set snapshot configuration</span></span><br><span class="line">		<span class="variable">$snapshot</span> =  <span class="built_in">New-AzSnapshotConfig</span> <span class="literal">-SourceUri</span> <span class="variable">$disk</span>.id <span class="literal">-Location</span> <span class="variable">$location</span> <span class="literal">-AccountType</span> Premium_LRS <span class="literal">-CreateOption</span> <span class="built_in">copy</span></span><br><span class="line"></span><br><span class="line">		<span class="variable">$snapshotName</span> = <span class="string">&#x27;datadisk-&#x27;</span> + <span class="variable">$vmName</span> + <span class="string">&#x27;-001-snapshot&#x27;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment"># create Snapshot </span></span><br><span class="line">		<span class="built_in">New-AzSnapshot</span> <span class="literal">-Snapshot</span> <span class="variable">$snapshot</span> <span class="literal">-SnapshotName</span> <span class="variable">$snapshotName</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-AsJob</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="built_in">Get-Job</span> | <span class="built_in">Wait-Job</span></span><br><span class="line"><span class="string">&quot;All jobs completed&quot;</span></span><br><span class="line"><span class="built_in">get-azSnapshot</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> | <span class="built_in">format-table</span> Name, ResourceGroupName</span><br></pre></td></tr></table></figure>

<h5 id="2-snapshot-to-VHD-in-blob"><a href="#2-snapshot-to-VHD-in-blob" class="headerlink" title="2. snapshot to VHD in blob."></a>2. snapshot to VHD in blob.</h5><p>After created snapshots, we should move snapshot to blob container.<br>Use following command.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$storageAccountName</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="variable">$storageContainerName</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="variable">$sasExpiryDuration</span>=<span class="number">3600</span></span><br><span class="line"><span class="variable">$storageAccountKey</span> = <span class="string">&quot; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"><span class="variable">$snpashots</span> =  Get-AzSnapshot -resourceGroup &#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">foreach(<span class="variable">$snapshot</span> in <span class="variable">$snpashots</span>) &#123; </span></span><br><span class="line"><span class="string">	<span class="variable">$snapshotName</span> = <span class="variable">$snapshot</span>.Name</span></span><br><span class="line"><span class="string">	<span class="variable">$destinationVHDFileName</span> = <span class="variable">$snapshotName</span> + &#x27;.vhd&#x27;</span></span><br><span class="line"><span class="string">	<span class="variable">$resourceGroupName</span> = <span class="variable">$snapshot</span>.ResourceGroupName</span></span><br><span class="line"><span class="string">	<span class="variable">$sas</span>=<span class="variable">$</span>(az snapshot grant-access --resource-group <span class="variable">$resourceGroupName</span> --name <span class="variable">$snapshotName</span> --duration-in-seconds <span class="variable">$sasExpiryDuration</span> --query [accessSas] -o tsv)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	az storage blob copy start --destination-blob <span class="variable">$destinationVHDFileName</span> --destination-container <span class="variable">$storageContainerName</span> --account-name <span class="variable">$storageAccountName</span> --account-key <span class="variable">$storageAccountKey</span> --source-uri <span class="variable">$sas</span> </span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Then we check it’s working well in container.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/04.vhd_move_blob.png" class>

<h5 id="3-blob-to-blob-target-Subscription"><a href="#3-blob-to-blob-target-Subscription" class="headerlink" title="3. blob to blob(target Subscription)"></a>3. blob to blob(target Subscription)</h5><p>Need <code>two value</code> for this job.<br>One is <code>container path</code>, the other one is <code>SAS token</code>.<br>In the container List, click the right three dot. then click <code>container properties</code>.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/05.get_path.png" class>

<p>Then you check <code>URL</code>. memorize it for next CLI.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/05.get_path_url.png" class>

<p>Then in the left side bar in storage account, Click the ‘Shared Access Signature’.<br>Click the <code>container</code>, and the click <code>generate SAS ...</code> button.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/05.get_sas_01.png" class>

<p>then memorized <code>SAS token</code></p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/05.get_sas_token.png" class>

<p>And, you have target Subscription. create storage account and container.<br>I also create stoarge account named <code>yy1111targetmigrate</code><br>And container name is <code>vmdisktarget</code><br>And also get container path, SAS token.</p>
<h5 id="3-blob-to-blob-target-Subscription-1"><a href="#3-blob-to-blob-target-Subscription-1" class="headerlink" title="3. blob to blob(target Subscription)"></a>3. blob to blob(target Subscription)</h5><p>use following command.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$srcPath</span> = <span class="string">&quot;https://yy1111migratestorage.blob.core.windows.net/vmdisk&quot;</span></span><br><span class="line"><span class="variable">$srcSAS</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="variable">$destPath</span> =<span class="string">&quot;https://yy1111targetmigrate.blob.core.windows.net/vmdisktarget&quot;</span></span><br><span class="line"><span class="variable">$destSAS</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">azcopy <span class="built_in">cp</span> <span class="variable">$srcPath</span><span class="variable">$srcSAS</span> <span class="variable">$destPath</span><span class="variable">$destSAS</span> -<span class="literal">-recursive</span></span><br></pre></td></tr></table></figure>

<p>It’s spend a few minutes. it depends on disk size.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/06.blob_to_blob_process.png" class>

<p>A few minutes later, process is done like under screen.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/07.return_blob_copy_done.png" class>

<p>And you check target container, vhd is visible.<br>you click refresh button if modified time is changed continuous.<br>then you wait more.</p>
<img src="/2020/12/14/20201214-az-vm-copy-other-sub/08.check_blob_copy_list.png" class>


<h5 id="4-make-disk-by-VHD-in-blob"><a href="#4-make-disk-by-VHD-in-blob" class="headerlink" title="4. make disk by VHD in blob"></a>4. make disk by VHD in blob</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$resourceGroupName</span> = <span class="string">&#x27;target-rg&#x27;</span></span><br><span class="line"><span class="variable">$resourceGroup</span> = <span class="built_in">Get-AzureRmResourceGroup</span> <span class="literal">-Name</span> <span class="variable">$resourceGroupName</span></span><br><span class="line"><span class="variable">$location</span> = <span class="variable">$resourceGroup</span>.Location</span><br><span class="line"><span class="variable">$StorageAccountName</span> = <span class="string">&#x27;yy1111targetmigrate&#x27;</span></span><br><span class="line"><span class="variable">$containerName</span> = <span class="string">&#x27;vmdisktarget&#x27;</span></span><br><span class="line"><span class="variable">$storageAccount</span> = <span class="built_in">Get-AzStorageAccount</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-Name</span> <span class="variable">$StorageAccountName</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$list</span> = az storage blob list <span class="literal">-c</span> <span class="variable">$containerName</span> -<span class="literal">-account</span><span class="literal">-name</span> <span class="variable">$StorageAccountName</span> | <span class="built_in">ConvertFrom-Json</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$sourceUri_prefix</span> = <span class="string">&#x27;https://&#x27;</span> + <span class="variable">$storageAccountName</span> + <span class="string">&#x27;.blob.core.windows.net/&#x27;</span> + <span class="variable">$containerName</span> + <span class="string">&#x27;/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Foreach</span>(<span class="variable">$list</span> <span class="keyword">in</span> <span class="variable">$List</span>) &#123; </span><br><span class="line">	<span class="variable">$sourceUri</span> = <span class="variable">$sourceUri_prefix</span> + <span class="variable">$list</span>.name</span><br><span class="line">	<span class="variable">$osDiskName</span> = <span class="variable">$list</span>.name.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">	<span class="built_in">write-host</span> <span class="variable">$sourceUri</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">New-AzDisk</span> <span class="literal">-DiskName</span> <span class="variable">$osDiskName</span> <span class="literal">-Disk</span> `</span><br><span class="line">		(<span class="built_in">New-AzDiskConfig</span> <span class="literal">-AccountType</span> Premium_LRS <span class="literal">-Location</span> <span class="variable">$location</span> <span class="literal">-CreateOption</span> Import <span class="literal">-SourceUri</span> <span class="variable">$sourceUri</span> <span class="literal">-StorageAccountId</span> <span class="variable">$storageAccount</span>.Id) `</span><br><span class="line">		<span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-AsJob</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Get-Job</span> | <span class="built_in">Wait-Job</span></span><br><span class="line"><span class="string">&quot;All jobs completed&quot;</span></span><br><span class="line"><span class="built_in">get-AzDisk</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> | <span class="built_in">format-table</span> Name, ResourceGroupName</span><br></pre></td></tr></table></figure>

<p>And then check Disks in the portal.</p>
<h5 id="5-create-vm-using-disk"><a href="#5-create-vm-using-disk" class="headerlink" title="5. create vm using disk"></a>5. create vm using disk</h5><p>Execute following command. but, you should modify variable appropriately</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$List</span> = <span class="selector-tag">@</span>( </span><br><span class="line">  <span class="selector-tag">@</span>&#123; name=<span class="string">&#x27;target-vm&#x27;</span>; privateIpAddress=<span class="string">&#x27;10.0.0.4&#x27;</span>; vmSize=<span class="string">&#x27;Standard_D2s_v3&#x27;</span>; publicIpName=<span class="string">&#x27;&#x27;</span>;&#125;</span><br><span class="line"></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="variable">$resourceGroupName</span> = <span class="string">&#x27;target-rg&#x27;</span></span><br><span class="line"><span class="variable">$vnetName</span> = <span class="string">&quot;target-vnet&quot;</span> </span><br><span class="line"><span class="variable">$subnetName</span> = <span class="string">&quot;default&quot;</span></span><br><span class="line"><span class="variable">$nsgName</span> = <span class="string">&quot;prd-web-nsg&quot;</span></span><br><span class="line"><span class="variable">$storageType</span> = <span class="string">&#x27;Premium_LRS&#x27;</span></span><br><span class="line"><span class="variable">$dataDiskCaching</span>=<span class="string">&#x27;ReadOnly&#x27;</span></span><br><span class="line"><span class="variable">$resourceGroup</span> = <span class="built_in">Get-AzureRmResourceGroup</span> <span class="literal">-Name</span> <span class="variable">$resourceGroupName</span></span><br><span class="line"><span class="variable">$location</span> = <span class="variable">$resourceGroup</span>.Location	</span><br><span class="line"><span class="variable">$storageAccountName</span> = <span class="string">&#x27;osstemprddiag&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Foreach</span>(<span class="variable">$list</span> <span class="keyword">in</span> <span class="variable">$List</span>) &#123; </span><br><span class="line">	<span class="variable">$vmName</span> = <span class="variable">$list</span>.name</span><br><span class="line">	<span class="variable">$privateIpAddress</span>= <span class="variable">$list</span>.privateIpAddress</span><br><span class="line">	<span class="variable">$vmSize</span>= <span class="variable">$list</span>.vmSize</span><br><span class="line">	<span class="variable">$publicIPName</span> = <span class="variable">$list</span>.publicIpName</span><br><span class="line">	<span class="variable">$publicIp</span> = <span class="string">&#x27;&#x27;</span> </span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$publicIpName</span>) &#123; </span><br><span class="line">		<span class="variable">$publicIp</span> = <span class="built_in">Get-AzureRmPublicIpAddress</span> <span class="literal">-Name</span> <span class="variable">$publicIpName</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="variable">$osDiskName</span> = <span class="variable">$vmName</span> + <span class="string">&#x27;_OsDisk_0&#x27;</span></span><br><span class="line">	<span class="variable">$dataDiskName</span> = <span class="variable">$vmName</span> + <span class="string">&#x27;_DataDisk_0&#x27;</span></span><br><span class="line">	<span class="variable">$nicName</span> = <span class="variable">$vmName</span> + <span class="string">&quot;-nic01&quot;</span></span><br><span class="line">	<span class="variable">$Lun</span>=<span class="variable">$dataDiskName</span>.substring(<span class="variable">$dataDiskName</span>.length<span class="literal">-1</span>)</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># 2. get nic information </span></span><br><span class="line">	<span class="variable">$vnet</span> = <span class="built_in">get-AzVirtualNetwork</span> <span class="literal">-Name</span> <span class="variable">$vnetName</span> </span><br><span class="line">	<span class="variable">$nsg</span> = <span class="built_in">Get-AzureRmNetworkSecurityGroup</span> <span class="literal">-Name</span> <span class="variable">$nsgName</span></span><br><span class="line">	<span class="variable">$subnet</span> = <span class="built_in">Get-AzureRmVirtualNetworkSubnetConfig</span> <span class="literal">-virtualNetwork</span> <span class="variable">$vnet</span> <span class="literal">-Name</span> <span class="variable">$subnetName</span></span><br><span class="line">	<span class="variable">$nic</span> = <span class="built_in">Get-AzureRmNetworkInterface</span> <span class="literal">-Name</span> <span class="variable">$nicName</span></span><br><span class="line">	<span class="keyword">if</span>(!<span class="variable">$nic</span>) &#123; </span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$publicIpName</span>) &#123; </span><br><span class="line">			<span class="variable">$nic</span> = <span class="built_in">New-AzNetworkInterface</span> <span class="literal">-Name</span> <span class="variable">$nicName</span> <span class="literal">-PrivateIpAddress</span> <span class="variable">$privateIpAddress</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-Location</span> <span class="variable">$location</span> <span class="literal">-SubnetId</span>  <span class="variable">$subnet</span>.id <span class="literal">-NetworkSecurityGroupId</span> <span class="variable">$nsg</span>.Id <span class="literal">-PublicIpAddressId</span> <span class="variable">$publicIp</span>.id </span><br><span class="line">			</span><br><span class="line">	   &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">			<span class="variable">$nic</span> = <span class="built_in">New-AzNetworkInterface</span> <span class="literal">-Name</span> <span class="variable">$nicName</span> <span class="literal">-PrivateIpAddress</span> <span class="variable">$privateIpAddress</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-Location</span> <span class="variable">$location</span> <span class="literal">-SubnetId</span>  <span class="variable">$subnet</span>.id <span class="literal">-NetworkSecurityGroupId</span> <span class="variable">$nsg</span>.Id </span><br><span class="line">	   &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment"># 3. get osDisk information   </span></span><br><span class="line">	<span class="variable">$osDisk</span> = <span class="built_in">Get-AzureRmDisk</span> <span class="literal">-DiskName</span> <span class="variable">$osDiskName</span></span><br><span class="line">	<span class="variable">$dataDisk</span> = <span class="built_in">Get-AzureRmDisk</span> <span class="literal">-DiskName</span> <span class="variable">$dataDiskName</span></span><br><span class="line">	<span class="variable">$osDiskSizeGB</span>=<span class="variable">$osDisk</span>.DiskSizeGB</span><br><span class="line">	<span class="variable">$dataDiskSizeGB</span>=<span class="variable">$dataDisk</span>.DiskSizeGB</span><br><span class="line"></span><br><span class="line">	<span class="comment"># 4. set vm configuration</span></span><br><span class="line">	<span class="variable">$vmConfig</span> = <span class="built_in">New-AzVMConfig</span> <span class="literal">-VMName</span> <span class="variable">$vmName</span> <span class="literal">-VMSize</span> <span class="variable">$vmSize</span> </span><br><span class="line">	<span class="variable">$vm</span> = <span class="built_in">Add-AzVMNetworkInterface</span> <span class="literal">-VM</span> <span class="variable">$vmConfig</span> <span class="literal">-Id</span> <span class="variable">$nic</span>.Id </span><br><span class="line">	<span class="variable">$vm</span> = <span class="built_in">Set-AzVMOSDisk</span> <span class="literal">-VM</span> <span class="variable">$vm</span> <span class="literal">-ManagedDiskId</span> <span class="variable">$osDisk</span>.id <span class="literal">-StorageAccountType</span> <span class="variable">$storageType</span> <span class="literal">-DiskSizeInGB</span> <span class="variable">$osDiskSizeGB</span> <span class="literal">-CreateOption</span> Attach <span class="literal">-Windows</span></span><br><span class="line">	<span class="variable">$vm</span> = <span class="built_in">Add-AzVMDataDisk</span> <span class="literal">-VM</span> <span class="variable">$vm</span> <span class="literal">-Name</span> <span class="variable">$dataDiskName</span> <span class="literal">-DiskSizeInGB</span> <span class="variable">$dataDiskSizeGB</span> <span class="literal">-StorageAccountType</span> <span class="variable">$storageType</span> <span class="literal">-Caching</span> <span class="variable">$dataDiskCaching</span> <span class="literal">-Lun</span> <span class="variable">$Lun</span> <span class="literal">-CreateOption</span> Attach  <span class="literal">-ManagedDiskId</span> <span class="variable">$dataDisk</span>.id</span><br><span class="line">		</span><br><span class="line">	<span class="variable">$vm</span> = <span class="built_in">Set-AzVMBootDiagnostic</span> <span class="literal">-VM</span> <span class="variable">$vm</span> <span class="literal">-Enable</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-StorageAccountName</span> <span class="variable">$storageAccountName</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment"># 6. create vm </span></span><br><span class="line">	<span class="built_in">New-AzVM</span> <span class="literal">-ResourceGroupName</span> <span class="variable">$resourceGroupName</span> <span class="literal">-Location</span> <span class="variable">$location</span> <span class="literal">-VM</span> <span class="variable">$vm</span> <span class="literal">-LicenseType</span> <span class="string">&#x27;Windows_Server&#x27;</span> <span class="literal">-AsJob</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">#Get-Job | Wait-Job</span></span><br><span class="line"><span class="string">&quot;All jobs completed&quot;</span></span><br><span class="line"><span class="comment">#get-AzVM -ResourceGroupName $resourceGroupName | format-table Name, ResourceGroupName</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Thanks.</p>
<h3 id="Related-Posts"><a href="#Related-Posts" class="headerlink" title="Related Posts"></a>Related Posts</h3>
        </div>
        <footer class="article-footer">
            



    <a data-url="https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/" data-id="cljdxt3m2000bqigd0uuh4ru6" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "Yong Yang"
        },
        "headline": "How can i move vm to other subscription.",
        "image": "https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/01.show_vm_with_disks.png",
        "keywords": "Cloud Azure Copy Move",
        "genre": "Azure VM",
        "datePublished": "2020-12-14",
        "dateCreated": "2020-12-14",
        "dateModified": "2023-06-27",
        "url": "https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/",
        "description": "Hi. Sometimes we use POC subscription not PROD subscription.Then if you done POC, you move to resources include VM, LB, etc…Maybe VM move to another subscription not share tenant too difficult.
So i t",
        "wordCount": 1676
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="stack-overflow" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-stack-overflow"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="weibo" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-weibo"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/" target="_blank" rel="noopener">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2020/12/14/20201215-nsg-visualize/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            How can search NSG flow log easily?
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2020/12/13/20201214-resource-graph/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">Search unused resource using resource-graph-explorer</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/12/19/20201220-azure-sample-app05/" class="thumbnail">
    
    
        <span style="background-image:url(/2020/12/19/20201220-azure-sample-app05/02.step05.png)" alt="Azure app architecure - step05!!" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Azure/">Azure</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Azure/Function/">Function</a></p>
                            <p class="item-title"><a href="/2020/12/19/20201220-azure-sample-app05/" class="title">Azure app architecure - step05!!</a></p>
                            <p class="item-date"><time datetime="2020-12-19T18:54:09.000Z" itemprop="datePublished">2020-12-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/12/19/20201220-azure-sample-app04/" class="thumbnail">
    
    
        <span style="background-image:url(/2020/12/19/20201220-azure-sample-app04/02.step04.png)" alt="Azure app architecure - step04" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Azure/">Azure</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Azure/Function/">Function</a></p>
                            <p class="item-title"><a href="/2020/12/19/20201220-azure-sample-app04/" class="title">Azure app architecure - step04</a></p>
                            <p class="item-date"><time datetime="2020-12-19T18:54:03.000Z" itemprop="datePublished">2020-12-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/12/19/20201220-azure-sample-app03/" class="thumbnail">
    
    
        <span style="background-image:url(/2020/12/19/20201220-azure-sample-app03/02.step03.png)" alt="Azure app architecure - step03" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Azure/">Azure</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Azure/Function/">Function</a></p>
                            <p class="item-title"><a href="/2020/12/19/20201220-azure-sample-app03/" class="title">Azure app architecure - step03</a></p>
                            <p class="item-date"><time datetime="2020-12-19T18:53:55.000Z" itemprop="datePublished">2020-12-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/12/19/20201220-azure-sample-app02/" class="thumbnail">
    
    
        <span style="background-image:url(/2020/12/19/20201220-azure-sample-app02/02.step02.png)" alt="Azure app architecure - step02" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Azure/">Azure</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Azure/Function/">Function</a></p>
                            <p class="item-title"><a href="/2020/12/19/20201220-azure-sample-app02/" class="title">Azure app architecure - step02</a></p>
                            <p class="item-date"><time datetime="2020-12-19T18:53:47.000Z" itemprop="datePublished">2020-12-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/12/19/20201220-azure-sample-app01/" class="thumbnail">
    
    
        <span style="background-image:url(/2020/12/19/20201220-azure-sample-app01/02.step01.png)" alt="Azure app architecure - step01" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Azure/">Azure</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Azure/Function/">Function</a></p>
                            <p class="item-title"><a href="/2020/12/19/20201220-azure-sample-app01/" class="title">Azure app architecure - step01</a></p>
                            <p class="item-date"><time datetime="2020-12-19T18:53:40.000Z" itemprop="datePublished">2020-12-20</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Azure/">Azure</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Azure/Function/">Function</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Azure/Powershell/">Powershell</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Azure/VM/">VM</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Azure/VM/NSG/">NSG</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Azure/Windows/">Windows</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">16</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Azure/" rel="tag">Azure</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cloud/" rel="tag">Cloud</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Copy/" rel="tag">Copy</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cosmos/" rel="tag">Cosmos</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Function/" rel="tag">Function</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graph/" rel="tag">Graph</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LB/" rel="tag">LB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Latency/" rel="tag">Latency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log-Analytics/" rel="tag">Log Analytics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Move/" rel="tag">Move</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NAT/" rel="tag">NAT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSG/" rel="tag">NSG</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Network/" rel="tag">Network</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Powershell/" rel="tag">Powershell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Resource/" rel="tag">Resource</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Snapshot/" rel="tag">Snapshot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StaticWeb/" rel="tag">StaticWeb</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Subscription/" rel="tag">Subscription</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unused-Resource/" rel="tag">Unused Resource</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VM/" rel="tag">VM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Azure/" style="font-size: 20px;">Azure</a> <a href="/tags/Cloud/" style="font-size: 20px;">Cloud</a> <a href="/tags/Copy/" style="font-size: 12.5px;">Copy</a> <a href="/tags/Cosmos/" style="font-size: 17.5px;">Cosmos</a> <a href="/tags/Function/" style="font-size: 17.5px;">Function</a> <a href="/tags/Graph/" style="font-size: 10px;">Graph</a> <a href="/tags/LB/" style="font-size: 10px;">LB</a> <a href="/tags/Latency/" style="font-size: 10px;">Latency</a> <a href="/tags/Log-Analytics/" style="font-size: 10px;">Log Analytics</a> <a href="/tags/Move/" style="font-size: 10px;">Move</a> <a href="/tags/NAT/" style="font-size: 10px;">NAT</a> <a href="/tags/NSG/" style="font-size: 12.5px;">NSG</a> <a href="/tags/Network/" style="font-size: 12.5px;">Network</a> <a href="/tags/Powershell/" style="font-size: 15px;">Powershell</a> <a href="/tags/Resource/" style="font-size: 10px;">Resource</a> <a href="/tags/Snapshot/" style="font-size: 10px;">Snapshot</a> <a href="/tags/StaticWeb/" style="font-size: 17.5px;">StaticWeb</a> <a href="/tags/Subscription/" style="font-size: 10px;">Subscription</a> <a href="/tags/Unused-Resource/" style="font-size: 10px;">Unused Resource</a> <a href="/tags/VM/" style="font-size: 12.5px;">VM</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a target="_blank" rel="external nofollow noopener noreferrer" href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2024 Yong Yang</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank" rel="external nofollow noopener noreferrer">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'https://yy1111yang.github.io/2020/12/14/20201214-az-vm-copy-other-sub/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


</body>
</html>
